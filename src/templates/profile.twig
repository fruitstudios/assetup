{% set uploader = uploader ?? false %}

{% if uploader and not uploader.hasErrors() %}

    {% set transform = transform ?? '' %}

    {% set classes = [
        'uploadit--userPhotoUploader',
        uploader.photo ? 'uploadit--hasUserPhoto' : null,
        uploader.customClass ? uploader.customClass : null,
    ]|filter|join(' ') %}

    <div id="{{ uploader.id }}" class="{{ classes }}">

        <div class="uploadit--errors uploadit--isHidden"></div>

        {% if uploader.default ?? false %}
            <img class="uploadit--defaultPhoto{{ photo ? ' uploadit--isHidden' }}" src="{{ uploader.default.url(transform)|default(uploader.default) }}" />
        {% endif %}

        <img class="uploadit--userPhoto{{ not photo ? ' uploadit--isHidden' }}" src="{{ uploader.photo.url(transform)|default(uploader.default) }}" alt="User Photo" />

        <a href="javascript:;" class="uploadit--upload">
            <input type="file" name="uploaditAssetInput" style="display:none;" />
        </a>

        <div class="uploadit--preload uploadit--isHidden"></div>

    </div>

{% else %}

    <div class="uploadit--notice">
        {% if uploader.hasErrors() %}
            <p>{{ 'Uploader Not Ready'|t('uploadit') }}</p>
            <ul class="uploadit--noticeErrors">
                {% for error in uploader.getErrors() %}
                    <li>{{ error|filter|join(', ') }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>{{ 'Uploader Not Found'|t('uploadit') }}</p>
        {% endif %}
    </div>

{% endif %}
